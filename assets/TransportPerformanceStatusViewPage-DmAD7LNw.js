import{z as x,q as w,e as g,a as c,c as m,f as l,w as d,b as u,t as P,D as z,r as p,v as y,o as D,E as $,F as k,d as A,A as N,G as B,H as E}from"./index-DOp6jeaH.js";import{i as L,L as V}from"./index-D2HgxUDj.js";import{C as b,F as R}from"./CardContainer-tCdcQVTS.js";const F={class:"w-100 d-flex flex-row justify-content-center"},j={class:"d-flex flex-column"},I={class:"percentage-value"},Y={class:"percentage-label my-2"},O={__name:"RatioDisplay",props:{percentage:{type:Number,default:10},label:{type:String,default:"自動化率"}},setup(f){const o=f;return w(()=>o.manualTasksNum+o.hostTasksNum),(s,t)=>{const e=g("el-progress");return c(),m("div",F,[l(e,{type:"circle",percentage:o.percentage,"stroke-width":"15",width:"180"},{default:d(({percentage:i})=>[u("div",j,[u("span",I,P(i)+"%",1),u("span",Y,P(o.label),1)])]),_:1},8,["percentage"])])}}},U=x(O,[["__scopeId","data-v-c63c564d"]]),G={class:"w-100 d-flex flex-row justify-content-center"},W={__name:"TransportAutomationRate",props:{manualTasksNum:{type:Number,default:10},hostTasksNum:{type:Number,default:10}},setup(f){const o=f,s=w(()=>o.manualTasksNum+o.hostTasksNum),t=w(()=>o.hostTasksNum/s.value*100);return(e,i)=>(c(),m("div",G,[l(U,{percentage:t.value,label:"自動化率"},null,8,["percentage"])]))}},T=x(W,[["__scopeId","data-v-7ae89f2a"]]),M={class:"chart-components task-success-rate-trend"},Q={__name:"TrendChart",props:{dailyStats:{type:Array,default:()=>[]},type:{type:String,default:()=>"line"},lineColor:{type:String,default:()=>"#E6A23C"},normalBarColor:{type:String,default:()=>"rgb(103, 194, 58)"},alarmBarColor:{type:String,default:()=>"rgb(250, 27, 73)"},title:{type:String,default:()=>""},xAxisName:{type:String,default:()=>"日期"},yAxisName:{type:String,default:()=>"成功率"},isExceedThreshold:{type:Function,default:()=>!1}},setup(f){const o=z(),s=p(null);let t=null;const e=f,i=()=>{t&&t.dispose(),t=L(s.value);const n={title:{text:e.title,left:"center",textStyle:{color:"#ffffff",fontSize:15}},tooltip:{trigger:"axis",formatter:`{b}<br/>${e.yAxisName}: {c}`},xAxis:{type:"category",nameLocation:"end",nameGap:10,data:e.dailyStats.map(r=>r.date),axisLabel:{color:"#ffffff",fontSize:14,margin:15},name:e.xAxisName,nameTextStyle:{color:"#ffffff",fontSize:18}},yAxis:{type:"value",min:0,name:e.yAxisName,nameTextStyle:{color:"#ffffff",fontSize:17,padding:[0,0,10,0]},axisLabel:{formatter:"{value}",color:"#ffffff",fontSize:14}},series:[],backgroundColor:"transparent",grid:{left:"3%",right:"6%",bottom:"3%",containLabel:!0}},a=[];(e.type==="bar"||e.type==="line-bar")&&a.push({data:e.dailyStats.map(r=>r.value),type:"bar",barWidth:"30%",itemStyle:{color:r=>e.isExceedThreshold(r.value)?new V(0,0,0,1,[{offset:0,color:e.alarmBarColor.replace(")",", 0.8)").replace("rgb","rgba")},{offset:1,color:e.alarmBarColor.replace(")",", 0.3)").replace("rgb","rgba")}]):new V(0,0,0,1,[{offset:0,color:e.normalBarColor.replace(")",", 0.8)").replace("rgb","rgba")},{offset:1,color:e.normalBarColor.replace(")",", 0.3)").replace("rgb","rgba")}])}}),(e.type==="line"||e.type==="line-bar")&&a.push({data:e.dailyStats.map(r=>r.value),type:"line",smooth:!1,lineStyle:{color:e.lineColor,width:3},symbol:"circle",symbolSize:8,itemStyle:{color:e.lineColor}}),n.series=a,t.setOption(n)};return y(()=>e.dailyStats,()=>{i()},{deep:!0}),y(()=>o.getCollapse,()=>{setTimeout(()=>{t&&t.resize()},10)}),y(()=>e.title,()=>{t.setOption({title:{text:e.title}})}),D(()=>{i(),window.addEventListener("resize",()=>{t&&t.resize()})}),(n,a)=>(c(),m("div",M,[u("div",{ref_key:"chartContainer",ref:s,style:{width:"100%",height:"250px"}},null,512)]))}},q=x(Q,[["__scopeId","data-v-9485c2ad"]]),H={class:"task-success-rate-trend"},X={__name:"TaskSuccessRateTrendChart",props:{dailyStats:{type:Array,default:()=>[]}},setup(f){const o=s=>s<80;return(s,t)=>(c(),m("div",H,[l(q,{title:"任務成功率",dailyStats:f.dailyStats,lineColor:"rgb(32, 160, 255)",normalBarColor:"rgb(22, 112, 178)",alarmBarColor:"rgb(250, 27, 73)",type:"line-bar",isExceedThreshold:o},null,8,["dailyStats"])]))}},J=x(X,[["__scopeId","data-v-bc223ab5"]]),K={__name:"BoxPlatChart",props:{title:{type:String,default:""},data:{type:Array,default:()=>[]},xAxisName:{type:String,default:"日期"},yAxisName:{type:String,default:"數值"}},setup(f){const o=p(null);let s=null;const t=z(),e=f;D(()=>{s=L(o.value),i()});const i=()=>{const n={title:{text:e.title,left:"center",textStyle:{color:"#ffffff",fontSize:15}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"6%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:e.data.map(a=>a.date),name:e.xAxisName,nameLocation:"end",nameGap:10,axisLabel:{color:"#ffffff",fontSize:14,margin:15},nameTextStyle:{color:"#ffffff",fontSize:18}},yAxis:{type:"value",name:e.yAxisName,nameLocation:"middle",nameGap:50,axisLabel:{color:"#ffffff",fontSize:14},nameTextStyle:{color:"#ffffff",fontSize:17,padding:[0,0,10,0]}},series:[{name:"BoxPlot",type:"boxplot",data:e.data.map(a=>[a.min,a.q1,a.median,a.q3,a.max]),itemStyle:{borderWidth:3},emphasis:{itemStyle:{borderWidth:3,shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0,0,0,0.5)"}},boxWidth:["40%","40%"],medianLineStyle:{color:"#000000"}}],backgroundColor:"transparent"};s.setOption(n)};return y(()=>e.data,()=>{i()},{deep:!0}),y(()=>t.isCollapse,()=>{s.resize()}),(n,a)=>(c(),m("div",{class:"chart-components",ref_key:"chartContainer",ref:o,style:{width:"100%",height:"250px"}},null,512))}},Z={class:"chart-components stack-chart"},ee={__name:"StackBarChart",props:{title:{type:String,default:""},xAxisName:{type:String,default:"日期"},yAxisName:{type:String,default:"數量"},series:{type:Array,default:()=>[{name:"數值",data:[],color:"#67C23A"}]}},setup(f){const o=z(),s=p(null);let t=null;const e=f,i=()=>{t&&t.dispose();const n=e.series[0].data.map(r=>r.date);t=L(s.value);const a={title:{text:e.title,left:"center",textStyle:{color:"#ffffff",fontSize:15}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:e.series.map(r=>r.name),top:30,textStyle:{color:"#ffffff"}},grid:{left:"3%",right:"6%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:n,name:e.xAxisName,nameLocation:"end",nameGap:10,axisLabel:{color:"#ffffff",fontSize:14,margin:15},nameTextStyle:{color:"#ffffff",fontSize:18}},yAxis:{type:"value",name:e.yAxisName,nameTextStyle:{color:"#ffffff",fontSize:17,padding:[0,0,10,0]},axisLabel:{color:"#ffffff",fontSize:14}},series:e.series.map(r=>({name:r.name,type:"bar",stack:"total",data:r.data.map(_=>_.value),itemStyle:{color:r.color}})),backgroundColor:"transparent"};t.setOption(a)};return y(()=>e.series,()=>{i()},{deep:!0}),y(()=>o.getCollapse,()=>{setTimeout(()=>{t&&t.resize()},10)}),y(()=>e.title,()=>{t.setOption({title:{text:e.title}})}),D(()=>{i(),window.addEventListener("resize",()=>{t&&t.resize()})}),(n,a)=>(c(),m("div",Z,[u("div",{ref_key:"chartContainer",ref:s,style:{width:"100%",height:"250px"}},null,512)]))}},te=x(ee,[["__scopeId","data-v-a268f3fe"]]),ae={class:"transfer-stats-by-tow-ports w-100 d-flex flex-column"},le={class:"source-dest-select-container mb-2 d-flex flex-row justify-content-between"},oe={class:"chart-components-container"},se={__name:"TransferStatsByTowPortsContainer",setup(f){const o=p(!1),s=p(""),t=p([{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"}]),e=[{date:"A->B",min:10,q1:20,median:25,q3:30,max:40},{date:"2024-03-02",min:15,q1:22,median:28,q3:35,max:45},{date:"2024-03-03",min:12,q1:18,median:24,q3:32,max:42},{date:"2024-03-04",min:8,q1:16,median:22,q3:28,max:38},{date:"2024-03-05",min:13,q1:21,median:27,q3:33,max:43}],i=p([{date:"2024-03-01",value:10},{date:"2024-03-02",value:15},{date:"2024-03-03",value:12}]),n=[{name:"完成數",data:[{date:"2024-03-01",value:185},{date:"2024-03-02",value:92},{date:"2024-03-03",value:88}],color:"#67C23A"},{name:"失敗數",data:[{date:"2024-03-01",value:85},{date:"2024-03-02",value:92},{date:"2024-03-03",value:88}],color:"#F56C6C"},{name:"取消數",data:[{date:"2024-03-01",value:85},{date:"2024-03-02",value:92},{date:"2024-03-03",value:88}],color:"#E6A23C"}],a=()=>{o.value=!0,setTimeout(()=>{o.value=!1},500)};return(r,_)=>{const S=g("el-option"),C=g("el-select"),h=$("loading");return c(),m("div",ae,[u("div",le,[_[2]||(_[2]=u("span",null,"起點",-1)),l(C,{size:"large",modelValue:s.value,"onUpdate:modelValue":_[0]||(_[0]=v=>s.value=v),placeholder:"選擇起點設備",class:"w-100"},{default:d(()=>[(c(!0),m(k,null,A(t.value,v=>(c(),N(S,{key:v.value,label:v.label,value:v.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),_[3]||(_[3]=u("span",null," 終點",-1)),l(C,{size:"large",modelValue:s.value,"onUpdate:modelValue":_[1]||(_[1]=v=>s.value=v),placeholder:"選擇終點設備",class:"w-100",onChange:a},{default:d(()=>[(c(!0),m(k,null,A(t.value,v=>(c(),N(S,{key:v.value,label:v.label,value:v.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),B((c(),m("div",oe,[l(te,{title:"每日任務統計",series:n,xAxisName:"日期",yAxisName:"數量"}),l(q,{title:"任務執行時間",dailyStats:i.value,lineColor:"rgb(32, 160, 255)",normalBarColor:"rgb(22, 112, 178)",alarmBarColor:"rgb(250, 27, 73)",type:"line-bar",yAxisName:"執行花費時間",isExceedThreshold:r.alarmCompare},null,8,["dailyStats","isExceedThreshold"]),l(K,{title:"路徑花費時間 Box Plot",data:e,xAxisName:"時間",yAxisName:"任務成功率"})])),[[h,o.value]])])}}},ne=x(se,[["__scopeId","data-v-b71a05d2"]]),re={class:"eqp-unload-waiting-time-trend"},ie={class:"w-100 d-flex flex-row justify-content-between"},de={__name:"EQPUnloadWaitingTimeTrendChart",setup(f){const o=a=>a>290,s=p([{date:"2024-02-20",value:189.5},{date:"2024-02-21",value:189.5},{date:"2024-02-22",value:193.8},{date:"2024-02-23",value:187.4},{date:"2024-02-24",value:192.1},{date:"2024-02-25",value:300},{date:"2024-02-26",value:188.9},{date:"2024-02-27",value:190.3},{date:"2024-02-28",value:186.5},{date:"2024-02-29",value:193.4},{date:"2024-03-01",value:195.5},{date:"2024-03-02",value:188.2},{date:"2024-03-03",value:192.7},{date:"2024-03-04",value:182},{date:"2024-03-05",value:194.3}]),t=p([{value:"eqp1",label:"設備1"},{value:"eqp2",label:"設備2"},{value:"eqp3",label:"設備3"}]),e=p(void 0),i=p("標題"),n=p(!1);return y(e,a=>{i.value=`Unload 平均等待時間 - ${a}`,n.value=!0,setTimeout(()=>{n.value=!1},400)}),(a,r)=>{const _=g("el-option"),S=g("el-select"),C=$("loading");return c(),m("div",re,[u("div",ie,[l(S,{size:"large",modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=h=>e.value=h),placeholder:"選擇設備",class:"mb-2"},{default:d(()=>[(c(!0),m(k,null,A(t.value,h=>(c(),N(_,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),B(l(q,{dailyStats:s.value,lineColor:"rgb(32, 160, 255)",normalBarColor:"rgb(103, 194, 58)",alarmBarColor:"rgb(250, 27, 73)",type:"line-bar",alarmValue:90,yAxisName:"等待時間",isExceedThreshold:o,title:i.value},null,8,["dailyStats","title"]),[[C,n.value]])])}}},ce=x(de,[["__scopeId","data-v-c25ca15f"]]),ue={id:"transportPerformanceContainer",class:"transport-performance-container p-3 rounded-3 d-flex"},fe={class:"w-100"},pe={__name:"TransportPerformanceContainer",setup(f){const o=p([{date:"2024-02-20",value:91.2},{date:"2024-02-21",value:89.5},{date:"2024-02-22",value:93.8},{date:"2024-02-23",value:75},{date:"2024-02-24",value:71},{date:"2024-02-25",value:94.7},{date:"2024-02-26",value:88.9},{date:"2024-02-27",value:90.3},{date:"2024-02-28",value:86.5},{date:"2024-02-29",value:93.4},{date:"2024-03-01",value:95.5},{date:"2024-03-02",value:88.2},{date:"2024-03-03",value:92.7},{date:"2024-03-04",value:79},{date:"2024-03-05",value:94.3}]);return(s,t)=>{const e=g("el-col"),i=g("el-row");return c(),m("div",ue,[u("div",fe,[l(i,{class:"h-100",gutter:10},{default:d(()=>[l(e,{lg:9,md:24},{default:d(()=>[l(i,{gutter:5},{default:d(()=>[l(e,{lg:8,xl:8,class:"d-flex justify-content-center"},{default:d(()=>[l(b,{class:"w-100"},{header:d(()=>t[0]||(t[0]=[u("h6",null,"自動化率",-1)])),default:d(()=>[l(T,{manualTasksNum:30,hostTasksNum:10})]),_:1})]),_:1}),l(e,{lg:8,xl:8,class:"d-flex justify-content-center"},{default:d(()=>[l(b,{class:"w-100"},{header:d(()=>t[1]||(t[1]=[u("h6",null,"自動化率",-1)])),default:d(()=>[l(T,{manualTasksNum:30,hostTasksNum:10})]),_:1})]),_:1}),l(e,{lg:8,xl:8,class:"d-flex justify-content-center"},{default:d(()=>[l(b,{class:"w-100"},{header:d(()=>t[2]||(t[2]=[u("h6",null,"自動化率",-1)])),default:d(()=>[l(T,{manualTasksNum:30,hostTasksNum:120})]),_:1})]),_:1})]),_:1}),l(b,{class:"w-100 my-1"},{header:d(()=>t[3]||(t[3]=[u("h6",null,"任務成功率",-1)])),default:d(()=>[l(J,{dailyStats:o.value},null,8,["dailyStats"])]),_:1}),l(b,{class:"w-100"},{header:d(()=>t[4]||(t[4]=[u("h6",null,"EQP卸載等待時間",-1)])),default:d(()=>[l(ce)]),_:1})]),_:1}),l(e,{lg:15,md:24,class:""},{default:d(()=>[l(b,{class:"w-100 h-100"},{header:d(()=>t[5]||(t[5]=[u("h6",null,"From-To 搬運狀態統計",-1)])),default:d(()=>[l(ne,{class:"h-100"})]),_:1})]),_:1})]),_:1})])])}}},me=x(pe,[["__scopeId","data-v-41539f92"]]),_e={class:"date-range-picker"},ve={__name:"DateRangePicker",emits:["update:dateRange"],setup(f,{emit:o}){const s=p([]),t=[{text:"最近一週",value:()=>{const n=new Date,a=new Date;return a.setTime(a.getTime()-3600*1e3*24*7),[a,n]}},{text:"最近一個月",value:()=>{const n=new Date,a=new Date;return a.setTime(a.getTime()-3600*1e3*24*30),[a,n]}},{text:"最近三個月",value:()=>{const n=new Date,a=new Date;return a.setTime(a.getTime()-3600*1e3*24*90),[a,n]}}],e=o,i=n=>{if(n){const[a,r]=n;e("update:dateRange",{startDate:E(a).format("YYYY-MM-DD"),endDate:E(r).format("YYYY-MM-DD")})}else e("update:dateRange",null)};return(n,a)=>{const r=g("el-date-picker");return c(),m("div",_e,[l(r,{size:"large",modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=_=>s.value=_),type:"daterange","range-separator":"至","start-placeholder":"開始日期","end-placeholder":"結束日期",shortcuts:t,onChange:i},null,8,["modelValue"])])}}},ye=x(ve,[["__scopeId","data-v-2fb4f4e8"]]),xe={class:"h-100",style:{"overflow-x":"hidden"}},ge={class:"d-flex justify-content-between mb-1 mx-3"},Ce={__name:"TransportPerformanceStatusViewPage",setup(f){const o=p(!1),s=()=>{o.value=!0,setTimeout(()=>{o.value=!1},400)};return(t,e)=>{const i=$("loading");return c(),m("div",xe,[u("div",ge,[l(R,{onFieldChange:s}),l(ye)]),B(l(me,null,null,512),[[i,o.value]])])}}};export{Ce as default};
